// Fetch client service history from the database
const fetchClientHistory = useCallback(async (clientId: string) => {
	if (!clientId) return;
	setIsHistoryLoading(true);
	try {
		const { data, error } = await supabase
			.from('pos_order_items')
			.select(`
				*,
				pos_orders(created_at, status, id, total_amount)
			`)
			.eq('client_id', clientId)
			.order('created_at', { ascending: false })
			.limit(20);
		if (error) {
			console.error('Error fetching client history:', error);
			toast.error('Failed to load client history');
			setClientServiceHistory([]);
		} else {
			setClientServiceHistory(data || []);
		}
	} catch (err) {
		console.error('Error in client history fetch:', err);
		setClientServiceHistory([]);
	} finally {
		setIsHistoryLoading(false);
